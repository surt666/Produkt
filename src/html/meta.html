<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="jquery-1.6.2.js"></script>          
    <script type="text/javascript">                                         
     $(document).ready(function() {
       $('.error').hide();  
       $.ajax({        
         url: "http://localhost:8080/produkt/findalle/produkter",
         dataType: "jsonp",
         success: function(res) {
           var optionsp = '';
           for (var i = 0; i < res.length; i++) {
             optionsp += '<option value="' + res[i].varenr + '">' + res[i].navn + '</option>';
           }
           $("select#produkter").html(optionsp);
         },
         error: function(xhr, ao, te) {
           alert("FUCK1 " + xhr.status + " " + xhr.message);
         }
       });    
       $("select#produkter").click(function() {
         var p = $("select#produkter").val(); 
         $.ajax({        
           url: "http://localhost:8080/produkt/find/produkt/" + p,
           dataType: "jsonp",
           success: function(res) {
             
           },
           error: function(xhr, ao, te) {
             alert("FUCK1 " + xhr.status + " " + xhr.message);
           }
         });
       });
       $("#submit_m").click(function() {
         var key = $("input#key").val(); 
         if (key == "") {  
           $("label#key_error").show();  
           $("input#key").focus();  
           return false;  
         }  
         var value = $("input#value").val(); 
         if (value == "") {  
           $("label#value_error").show();  
           $("input#value").focus();  
           return false;  
         }        
         var datamap = {id: id, navn: navn, logistik_system: logi_sys, logistik_kode: logi_kode, har_sn: har_sn};
         //alert (JSON.stringify(datamap));return false;
         $.ajax({ 
          accepts: "application/json",        
          cache: false,
          type: "POST",
          url: "http://localhost:8080/produkt/opret/hardware",
          contentType: "text/plain", 
          data: JSON.stringify(datamap),
          //processData: false,         
          success: function(res) {
            alert("OK " + res);
          },
          error: function(xhr, ts, te) {
            alert("FUCK " + xhr.status + " " + xhr.message + " " + ts + " " + te);
          }
        });
        return false;
       });
     });
    </script>                   
  </head>
  <body>
    <h1>META</h1>
    <div id="form1">
      <form action="" id="meta">
        <fieldset>
          <p><label for="produkter">Hardware:</label>
          <select id="produkter" name="produkter"></select></p> 
          <p><label for="key">Key:</label>
          <input type="text" id="key" />
          <label class="error" for="key" id="key_error">This field is required.</label></p>  
          <p><label for="value">Value:</label>
          <input type="text" id="value" />
          <label class="error" for="value" id="value_error">This field is required.</label></p>             
          <p><input type="submit" id="submit_m" value="Opret" /></p>
        </fieldset>
      </form>
      <p><a href="index.html">Opret produkt</a>&nbsp<a href="service.html">Opret service</a>&nbsp;<a href="hardware.html">Opret hardware</a></p>
    </div>
  </body>
</html>
